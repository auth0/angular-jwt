!function(){angular.module("angular-jwt",["angular-jwt.interceptor","angular-jwt.jwt"]),angular.module("angular-jwt.interceptor",[]).provider("jwtInterceptor",function(){this.authHeader="Authorization",this.authPrefix="Bearer ",this.tokenGetter=function(){return null};var r=this;this.$get=["$q","$injector","$rootScope",function(e,t,n){return{request:function(n){if(n.skipAuthorization)return n;if(n.headers=n.headers||{},n.headers[r.authHeader])return n;var a=e.when(t.invoke(r.tokenGetter,this,{config:n}));return a.then(function(e){return e&&(n.headers[r.authHeader]=r.authPrefix+e),n})},responseError:function(r){return 401===r.status&&n.$broadcast("unauthenticated",r),e.reject(r)}}}]}),angular.module("angular-jwt.jwt",[]).service("jwtHelper",function(){this.fromUtf8=function(r){var e,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=null,a=-1,o=[],i=[,,,];if(!n){for(e=t.length,n={};++a<e;)n[t.charAt(a)]=a;a=-1}for(e=r.length;++a<e&&(i[0]=n[r.charAt(a)],i[1]=n[r.charAt(++a)],o.push(i[0]<<2|i[1]>>4),i[2]=n[r.charAt(++a)],64!==i[2])&&(o.push((15&i[1])<<4|i[2]>>2),i[3]=n[r.charAt(++a)],64!==i[3]);)o.push((3&i[2])<<6|i[3]);return o},this.urlBase64Decode=function(r){var r=r.replace(/-/g,"+").replace(/_/g,"/"),e=/MSIE [67]/.test(navigator.userAgent),t=r.length%4;if(t){if(1===t)throw new Error("InvalidLengthError: Input base64url string is the wrong length to determine padding");r+=new Array(5-t).join("=")}if(r=r.replace(/\s/g,""),r.length%4)throw new Error("InvalidLengthError: decode failed: The string to be decoded is not the correct length for a base64 encoded string.");if(/[^A-Za-z0-9+\/=\s]/g.test(r))throw new Error("InvalidCharacterError: decode failed: The string contains characters invalid in a base64 encoded string.");var n,a=this.fromUtf8(r),o=0,i=a.length;if(e){for(n=[];i>o;)n.push(a[o]<128?String.fromCharCode(a[o++]):a[o]>191&&a[o]<224?String.fromCharCode((31&a[o++])<<6|63&a[o++]):String.fromCharCode((15&a[o++])<<12|(63&a[o++])<<6|63&a[o++]));return n.join("")}for(n="";i>o;)n+=String.fromCharCode(a[o]<128?a[o++]:a[o]>191&&a[o]<224?(31&a[o++])<<6|63&a[o++]:(15&a[o++])<<12|(63&a[o++])<<6|63&a[o++]);return n},this.decodeToken=function(r){var e=r.split(".");if(3!==e.length)throw new Error("JWT must have 3 parts");var t=this.urlBase64Decode(e[1]);if(!t)throw new Error("Cannot decode the token");return JSON.parse(t)},this.getTokenExpirationDate=function(r){var e;if(e=this.decodeToken(r),!e.exp)return null;var t=new Date(0);return t.setUTCSeconds(e.exp),t},this.isTokenExpired=function(r){var e=this.getTokenExpirationDate(r);return e?!(e.valueOf()>(new Date).valueOf()):!1}})}();